# 记忆系统 (Memory System)

## 概述

记忆系统是 AI Assistant 的"长期记忆"，用于存储项目上下文、用户偏好、历史决策等信息，解决 AI 在会话间的"失忆"问题。

## 为什么需要记忆系统？

AI 助手默认在每次对话时都是"新生"的状态，不记得之前的交流内容和项目细节。记忆系统通过持久化存储关键信息，让 AI 能够：

1. **理解项目背景** - 知道项目目标、技术栈、架构设计
2. **遵循用户偏好** - 记住你的编码风格、工作流习惯
3. **避免重复决策** - 查看历史决策和原因，保持一致性
4. **提升协作效率** - 快速上下文切换，减少重复说明

## 目录结构

```
memory/
├── README.md                 # 本文件，记忆系统说明
├── project/                  # 项目相关记忆
│   ├── brief.md             # 项目概览
│   ├── tech-stack.md        # 技术栈选择
│   └── architecture.md      # 系统架构
├── preferences/              # 用户偏好
│   ├── coding-style.md      # 编码风格
│   └── workflow.md          # 工作流程
├── decisions/                # 决策记录
│   └── adr/                 # 架构决策记录 (ADR)
│       └── 001-xxx.md       # 具体决策文档
└── auth/                     # 认证信息（敏感）
    └── boss-credentials.md   # 凭证（不提交敏感内容）
```

## 文件说明

### 项目记忆 (project/)
记录项目的持久性信息，这些是项目的"基因"。

| 文件 | 用途 | 更新频率 |
|-----|------|---------|
| `brief.md` | 项目目标、范围、核心功能 | 初期定义，偶尔调整 |
| `tech-stack.md` | 技术选型和理由 | 技术栈变化时 |
| `architecture.md` | 系统架构、设计模式 | 架构重构时 |

### 用户偏好 (preferences/)
记录你个人的工作习惯和偏好设置。

| 文件 | 用途 | 更新频率 |
|-----|------|---------|
| `coding-style.md` | 命名规范、格式偏好、注释风格 | 形成习惯后稳定 |
| `workflow.md` | 开发流程、时间管理、沟通方式 | 工作方式改变时 |

### 决策记录 (decisions/)
使用 **ADR (Architecture Decision Records)** 格式记录重要决策。

**ADR 命名规范**: `序号-简短描述.md`
- 示例: `001-use-markdown-for-knowledge-base.md`
- 示例: `002-adopt-typescript-for-frontend.md`

**ADR 模板内容**:
- 状态（提议/已采纳/已废弃）
- 上下文（为什么要做这个决策）
- 决策内容
- 理由（优缺点分析）
- 替代方案
- 影响

### 认证信息 (auth/)
存储访问凭证和认证信息（注意安全）。

⚠️ **安全提示**:
- 不要直接存储明文密码
- 敏感信息使用环境变量
- `.gitignore` 中排除敏感文件

## 使用指南

### 如何添加新记忆

1. **确定类型**
   - 项目相关 → `project/`
   - 个人偏好 → `preferences/`
   - 重要决策 → `decisions/adr/`

2. **创建或更新文件**
   - 使用清晰的标题和结构
   - 包含必要的上下文
   - 添加更新日期

3. **保持简洁**
   - 只记录关键信息
   - 避免过度细节
   - 定期清理过时内容

### 如何使用记忆

**AI 使用记忆的场景**:
- 开始新任务时，先读取 `project/brief.md` 了解项目
- 写代码前，查看 `preferences/coding-style.md` 确认风格
- 做技术选型时，参考 `decisions/adr/` 已有决策
- 遇到类似问题，查询历史决策避免重复思考

**你可以这样引导 AI**:
- "根据我的编码风格偏好来写这段代码"
- "参考项目架构文档，设计这个新模块"
- "查看我们之前为什么选择 XXX 技术"

## 最佳实践

### ✅ 应该记录的
- 项目的核心目标和范围
- 技术选型的原因和权衡
- 重复出现的偏好和规范
- 重要的架构决策
- 踩过的坑和解决方案

### ❌ 不应该记录的
- 敏感凭证（密码、私钥）→ 使用环境变量
- 临时会话信息 → 不需要持久化
- 过于细节的代码实现 → 应该在代码本身
- 已过时的信息 → 定期清理

### 维护建议
- **定期回顾**: 每月检查一次，更新过时内容
- **保持同步**: 项目变化时及时更新记忆
- **简洁明了**: 记忆不是日记，要精炼关键信息
- **结构清晰**: 使用标题、列表、表格组织内容

## 进阶用法

### 建立知识索引
为大量文档建立索引文件，方便快速查找：

```markdown
# 索引: 前端开发相关

- [React 组件规范](./decisions/adr/003-react-component-pattern.md)
- [状态管理方案](./decisions/adr/004-state-management.md)
- [样式方案选择](./decisions/adr/005-styling-solution.md)
```

### 使用标签
在文档中使用标签方便分类：

```markdown
---
tags: [frontend, react, architecture]
status: active
created: 2026-02-09
---
```

### 关联文档
在相关文档之间建立链接：

```markdown
## 相关文档
- [技术栈说明](../tech-stack.md)
- [架构设计](../architecture.md)
- [ADR 002: TypeScript 采用](./002-adopt-typescript.md)
```

## 常见问题

### Q: 记忆文件太多，AI 会不会记不住？
A: AI 会根据上下文智能选择相关记忆。你可以通过清晰的文档结构和索引帮助 AI 快速定位。

### Q: 每次对话都要重新读取记忆吗？
A: 在新对话开始或上下文切换时，AI 会主动读取相关记忆。你也可以明确要求 AI 查看某个记忆文件。

### Q: 记忆文件应该写多详细？
A: 记录"为什么"比"是什么"更重要。比如技术选型要说明选择的原因，而不只是列举技术名称。

### Q: 如何避免记忆过时？
A: 建议在每次重大变更后更新相关记忆，每月做一次记忆清理，删除过时内容。

## 参考资源

- [ADR 模板和最佳实践](https://adr.github.io/)
- [Memory Bank System 设计思想](https://github.com/joshuavial/memory-bank)
- [PARA 方法论](https://fortelabs.com/blog/para/)

---
*欢迎根据实际使用经验持续完善这个记忆系统！*

*最后更新: 2026-02-09*
