---
name: req-review-tech-doc
description: Generate a Chinese front-end technical document from requirement review notes. Use when asked to output versioned "前端技术方案/技术文档" in Markdown. This workflow supports conditional interface contract gating and static-first development.
---

# 需求评审输出技术文档

## Overview

将需求评审内容整理为**可评审、可开发、可回溯**的前端技术方案文档，作为本次迭代的设计蓝图，并作为后续接口契约与开发执行的输入依据。

---

## Workflow

### 1. 收集输入信息（最小集）

- 版本号、迭代周期、负责人
- 目标（主要 / 次要）
- 需求清单（新增功能 / 优化任务 / Bug 修复）
- 排期与流程
- 技术方案设计（组件设计 / API 变更 / 三方库 / 风险点）

> 规则：
> - 信息不完整时，**优先最少追问**
> - 无法确认的信息统一用 `TBD` 标记，并保留占位

---

### 2. 对齐现有代码习惯（用于“实现注意点”）

- 列表页结构、搜索区、公共组件与 render 复用方式
- 变量与函数命名规范（参考同模块）
- 路由与权限点（是否新增 / 是否涉及多国家）
- 图表（G2Plot / ECharts，优先复用封装）
- 全局公共组件是否需要沉淀
- 弹窗与确认规范（避免直接使用 window.confirm）
- 模块拆分与文件结构

> 输出结果必须体现在【实现注意点】中，作为后续 code review 的参考标准。

---

### 3. 生成技术文档（主产物）

1. 复制模板 `tech-doc-template.md`
2. 生成路径：`manager-tech-docs/{{version}} 技术文档.md`
3. 填充所有占位符，**不允许删除章节**
4. 需求与排期使用表格；流程使用有序列表

---

### 4. 技术评审 & 接口契约 Gate（关键决策点）

在本步骤**只做判断，不做开发**。

#### 4.1 判断是否存在接口依赖

- [ ] 是否涉及新增接口
- [ ] 是否涉及现有接口字段变更
- [ ] 是否需要前后端联调才能完成核心功能

---

#### 4.2 Gate 决策结果

##### 情况 A：无接口依赖 / 接口未设计（Static-first）

满足以下任一条件：

- 纯静态页面或交互优先
- 后端接口尚未设计完成
- 接口是否需要仍不确定

处理规则：

1. 技术文档中 **接口相关内容标记为 `TBD`**
2. 明确允许进入 **静态页面开发阶段**
3. 明确禁止：
   - 真实接口请求实现
   - 基于字段的核心业务判断
4. 记录接口回切条件（接口确认 / 字段冻结）

---

##### 情况 B：存在接口依赖（进入接口契约流程）

处理规则：

1. 创建《接口契约与技术评审文档》
2. 明确接口字段、错误码、分页、鉴权
3. 技术评审结论达成一致
4. 回写技术文档中的 API 变更结论
5. 标记接口状态为 **可开发**

---

### 5. 输出状态检查（进入开发前）

- [ ] 技术方案文档完成
- [ ] 接口状态明确（Static-first / 可开发）
- [ ] 风险点与 TBD 有负责人

---
