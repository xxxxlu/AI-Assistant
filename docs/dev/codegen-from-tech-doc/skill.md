---
owner: Boss
last_reviewed: 2026-02-24
review_cycle_days: 30
status: active
---

# 前端开发与 AI 协作规范 (Dev Stage Skills)

## 一、项目目录与职责映射（Context）

> 用于帮助 AI 快速理解项目结构。  
> **实现以当前项目实际代码为准，不强制过度设计。**

src/
├── api/        # 接口请求、Mock、Raw 数据处理
├── components/ # 可复用 UI / 业务组件（Props 驱动）
├── hooks/      # 通用可复用 hooks（列表、分页、交互等）
├── utils/      # 通用工具函数（format、列表通用 render 等）
├── types/      # 前端 UI 数据模型
├── views/      # 页面层（页面逻辑、数据组装、状态处理）
├── stores/     # 全局共享状态
├── router/     # 路由配置
├── layout/     # 全局布局
├── directives/ # 通用指令
├── styles/     # 全局样式
└── assets/     # 静态资源

### 基本约定（必须遵守）

- 接口请求只能写在 `api`
- 页面 / 组件只使用 `types` 中定义的数据结构
- 通用逻辑 **优先复用 `hooks` / `utils`，禁止页面内重复实现**
- 不确定实现方式时，以项目已有代码为准
---

## 二、开发 Gate (进入真实开发的条件)

**必须满足：**
*   ✅ 《前端技术方案》已输出
*   ✅ 技术方案评审结论为「通过」

**非阻塞条件 (不作为阻塞)：**
*   接口是否最终确认
*   字段是否冻结

---

## 三、API 使用原则 (防胡写，不锁死)

**允许：**
*   在 `src/api/*` 中定义接口请求
*   按业务模块拆分接口文件
*   使用已有的统一请求封装
*   **接口未确认阶段使用 Mock 数据**

**禁止：**
*   ❌ 在 `views` / `components` 中直接写 `axios` / `fetch`
*   ❌ 页面组件直接依赖后端 `raw` 返回结构 (如 `res.record`)

**推荐（非强制）：**
*   使用前端侧 `types` 描述页面真实需要的数据

---

## 四、Types 与数据模型使用原则

*   `types/` 用于定义：页面展示所需的数据结构
*   **不要求与后端字段完全一致**
*   接口变化时，优先在 `api` / 数据处理层消化
*   UI 层应依赖“对页面友好的数据结构”

> **核心目标：接口变化 ≠ 页面大改**

---

## 五、接口未确认下的真实开发策略

*   ✅ **允许**真实页面、交互、逻辑开发
*   ❌ **不因**接口未定而只写静态 demo
*   🛡️ **必须隔离变化面，避免返工扩大**

---

## 六、状态与交互处理规范 (软约束)

**最低要求 (必须考虑)：**
*   `loading`
*   `empty` (无数据)
*   `error` (异常或失败)

**允许 AI / 开发者自行补充：**
*   部分成功 / 弱失败提示
*   边界态 (极端数据、异常组合)

**说明：**
*   技术方案未覆盖但实现阶段发现合理状态，允许补充，不视为越界。

---

## 七、图表与复杂展示规范

*   技术方案未指定时： 允许在 `ECharts` / `G2Plot` 中自行选择
*   项目中已有同类图表： **优先复用**已有封装或实现方式

**禁止：**
*   ❌ 随意引入新的第三方图表库
*   ❌ 为展示复杂度而过度设计

> **原则：选择应服务于数据表达与交互，而非技术炫技**

---

## 八、代码修改边界 (防污染)

*   🛡️ **仅修改与需求直接相关的文件**
*   ❌ **不做**无关的全文件格式化
*   如必须大范围调整，需明确说明原因

---

## 九、AI 参与开发的通用规则

**✅ 允许 AI：**
*   补充方案未穷举的状态与交互
*   优化组件拆分与代码结构
*   在合理范围内选择实现方案
*   主动提出风险点或 `TODO`

**🚫 禁止 AI：**
*   编造不存在的业务规则
*   假设未确认的后端字段含义 (应使用 Mock 或 TBD)
*   绕过项目目录与职责约定
*   为“看起来完整”而引入明显不必要的复杂度


## 补充说明：hooks / utils 使用原则

*   项目中 **已存在通用 hooks / utils**：
    *   列表渲染
    *   通用数据处理或展示逻辑

*   **在新增实现前，必须优先查找并复用已有 hooks / utils**
*   若现有能力不足：
    *   ✅ 可在 `hooks` / `utils` 中补充
    *   ❌ 不允许在页面内临时实现一份重复逻辑

> 原则：**复用优先于新增，集中优先于分散**
